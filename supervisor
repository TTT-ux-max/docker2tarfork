[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:web_app]
command=python -m app.main
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/web_app.err.log
stdout_logfile=/var/log/web_app.out.log
stopsignal=TERM

[program:worker]
command=python -m app.worker
directory=/app
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/worker.err.log
stdout_logfile=/var/log/worker.out.log

# 可选：添加一个定期任务
[program:cron_job]
command=/app/app/cron_job.sh
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/cron.err.log
stdout_logfile=/var/log/cron.out.log
